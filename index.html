<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebVR Projects Hub</title>
    <!-- A-Frame for VR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* 2D Styles for non-VR users */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            text-align: center;
            z-index: 1000;
            position: relative;
        }
        
        .header {
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #FF6B6B, #FFD700);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .header p {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 30px;
        }
        
        .vr-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .vr-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .project-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .project-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 107, 107, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .project-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .battle-icon {
            color: #FF6B6B;
        }
        
        .museum-icon {
            color: #4ECDC4;
        }
        
        .project-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: white;
        }
        
        .project-card p {
            color: #ccc;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .btn-museum {
            background: linear-gradient(90deg, #4ECDC4, #06D6A0);
        }
        
        .btn-museum:hover {
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            border-left: 4px solid #FF6B6B;
        }
        
        .instructions h4 {
            margin-bottom: 10px;
            color: #FF6B6B;
        }
        
        .instructions p {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* VR Scene Container */
        #vr-scene-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 999;
            display: none;
        }
        
        /* Loading Screen for VR */
        .vr-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .projects-grid {
                grid-template-columns: 1fr;
            }
            
            .project-card {
                padding: 20px;
            }
        }
        
        /* Stats for VR */
        #vr-stats {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 1001;
            display: none;
        }
        
        /* Exit VR Button */
        .exit-vr-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 1001;
            display: none;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <!-- 2D Interface -->
    <div class="container" id="2d-interface">
        <div class="header">
            <h1><i class="fas fa-vr-cardboard"></i> WebVR Projects Hub</h1>
            <p>Immersive Virtual Reality Experiences</p>
            
            <button class="vr-toggle" id="enter-vr-btn">
                <i class="fas fa-vr-cardboard"></i>
                Enter VR Mode
            </button>
            
            <p style="color: #888; font-size: 0.9rem; margin-top: 10px;">
                <i class="fas fa-info-circle"></i> VR mode works best with VR headsets or on mobile devices
            </p>
        </div>
        
        <div class="projects-grid">
            <!-- Battle of Quinga Card -->
            <div class="project-card">
                <div class="project-icon battle-icon">
                    <i class="fas fa-fort"></i>
                </div>
                <h3>‚öîÔ∏è Battle of Quinga</h3>
                <p>Immerse yourself in the historical Battle of Quinga site with 360¬∞ panoramic views. Experience Philippine history in virtual reality.</p>
                <button class="btn" onclick="enterProject('battle-of-quinga')">
                    <i class="fas fa-play"></i> Launch in VR
                </button>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #888;">
                    <i class="fas fa-clock"></i> 3 Panoramic Views
                </p>
            </div>
            
            <!-- Bulacan Museum Card -->
            <div class="project-card">
                <div class="project-icon museum-icon">
                    <i class="fas fa-landmark"></i>
                </div>
                <h3>üèõÔ∏è Hiyas ng Bulacan Museum</h3>
                <p>Explore the virtual museum tour with 7 exhibition rooms. Navigate through cultural artifacts and historical displays.</p>
                <button class="btn btn-museum" onclick="enterProject('bulacan-museum')">
                    <i class="fas fa-play"></i> Launch in VR
                </button>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #888;">
                    <i class="fas fa-clock"></i> 7 Exhibition Rooms
                </p>
            </div>
        </div>
        
        <div class="instructions">
            <h4><i class="fas fa-info-circle"></i> How to Use</h4>
            <p>
                ‚Ä¢ <strong>Desktop:</strong> Click "Enter VR Mode" for immersive view, or click project buttons directly<br>
                ‚Ä¢ <strong>Mobile:</strong> Tap project buttons, or use VR mode for gyroscopic controls<br>
                ‚Ä¢ <strong>VR Headsets:</strong> Connect your headset and enter VR mode
            </p>
        </div>
    </div>
    
    <!-- VR Loading Screen -->
    <div class="vr-loading" id="vr-loading">
        <div style="text-align: center;">
            <div style="font-size: 3rem; color: #FF6B6B; margin-bottom: 20px;">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <h2 style="color: white; margin-bottom: 10px;">Loading VR Experience</h2>
            <p style="color: #aaa;" id="vr-loading-text">Preparing immersive environment...</p>
        </div>
    </div>
    
    <!-- VR Scene Container -->
    <div id="vr-scene-container">
        <a-scene embedded>
            <!-- Assets -->
            <a-assets>
                <!-- Menu background (space scene) -->
                <img id="space-bg" src="https://cdn.aframe.io/link-traversal/imgs/space.jpg" crossorigin="anonymous">
                
                <!-- Project icons -->
                <a-asset-item id="fort-obj" src="https://cdn.aframe.io/test-models/models/glTF-2.0/virtualcity/VC.gltf"></a-asset-item>
            </a-assets>
            
            <!-- Sky -->
            <a-sky src="#space-bg" rotation="0 -90 0"></a-sky>
            
            <!-- Center platform -->
            <a-cylinder position="0 -1.5 0" radius="5" height="0.1" color="#333" metalness="0.5" roughness="0.5"></a-cylinder>
            
            <!-- Title -->
            <a-text value="WebVR Projects Hub" 
                   position="0 3 -4" 
                   align="center" 
                   color="#FF6B6B" 
                   width="10"
                   font="https://cdn.aframe.io/fonts/Exo2Bold.fnt"></a-text>
            
            <!-- Project Selection Buttons -->
            
            <!-- Battle of Quinga Button -->
            <a-entity class="vr-menu-button" id="battle-btn" position="-2 0.5 -3" data-project="battle-of-quinga">
                <!-- Button base -->
                <a-cylinder radius="0.8" height="0.1" color="#FF6B6B" metalness="0.3" roughness="0.7"></a-cylinder>
                
                <!-- Icon -->
                <a-entity position="0 0.3 0">
                    <a-text value="‚öîÔ∏è" 
                           align="center" 
                           width="2" 
                           position="0 0 0.1"
                           scale="2 2 2"></a-text>
                </a-entity>
                
                <!-- Label -->
                <a-text value="Battle of Quinga" 
                       position="0 -0.8 0" 
                       align="center" 
                       color="white" 
                       width="3"></a-text>
                
                <!-- Hover effect -->
                <a-animation attribute="position"
                            from="-2 0.5 -3"
                            to="-2 0.8 -3"
                            dur="1000"
                            direction="alternate"
                            repeat="indefinite"></a-animation>
            </a-entity>
            
            <!-- Bulacan Museum Button -->
            <a-entity class="vr-menu-button" id="museum-btn" position="2 0.5 -3" data-project="bulacan-museum">
                <!-- Button base -->
                <a-cylinder radius="0.8" height="0.1" color="#4ECDC4" metalness="0.3" roughness="0.7"></a-cylinder>
                
                <!-- Icon -->
                <a-entity position="0 0.3 0">
                    <a-text value="üèõÔ∏è" 
                           align="center" 
                           width="2" 
                           position="0 0 0.1"
                           scale="2 2 2"></a-text>
                </a-entity>
                
                <!-- Label -->
                <a-text value="Bulacan Museum" 
                       position="0 -0.8 0" 
                       align="center" 
                       color="white" 
                       width="3"></a-text>
                
                <!-- Hover effect -->
                <a-animation attribute="position"
                            from="2 0.5 -3"
                            to="2 0.8 -3"
                            dur="1000"
                            direction="alternate"
                            repeat="indefinite"></a-animation>
            </a-entity>
            
            <!-- Instructions -->
            <a-text value="Look at a project and click to select" 
                   position="0 -2 -4" 
                   align="center" 
                   color="#aaa" 
                   width="6"></a-text>
            
            <!-- Camera -->
            <a-entity camera look-controls="pointerLockEnabled: true" position="0 1.6 0">
                <a-cursor></a-cursor>
            </a-entity>
            
            <!-- Lights -->
            <a-light type="ambient" color="#445"></a-light>
            <a-light type="point" intensity="0.8" position="5 5 5"></a-light>
            <a-light type="point" intensity="0.5" position="-5 3 -5"></a-light>
        </a-scene>
    </div>
    
    <!-- Exit VR Button -->
    <button class="exit-vr-btn" id="exit-vr-btn" onclick="exitVRMode()">
        <i class="fas fa-times"></i> Exit VR Mode
    </button>
    
    <!-- VR Stats -->
    <div id="vr-stats">
        <div>VR Mode Active</div>
        <div id="vr-fps">FPS: --</div>
    </div>

    <script>
        // =====================
        // STATE MANAGEMENT
        // =====================
        let isVRModeActive = false;
        let currentProject = null;
        
        // =====================
        // DOM ELEMENTS
        // =====================
        const vrSceneContainer = document.getElementById('vr-scene-container');
        const vrLoading = document.getElementById('vr-loading');
        const vrLoadingText = document.getElementById('vr-loading-text');
        const enterVRBtn = document.getElementById('enter-vr-btn');
        const exitVRBtn = document.getElementById('exit-vr-btn');
        const vrStats = document.getElementById('vr-stats');
        const interface2D = document.getElementById('2d-interface');
        const fpsDisplay = document.getElementById('vr-fps');
        
        // =====================
        // EVENT LISTENERS
        // =====================
        document.addEventListener('DOMContentLoaded', function() {
            // Enter VR Mode button
            enterVRBtn.addEventListener('click', enterVRMode);
            
            // VR Project selection in 3D scene
            setupVRSceneInteractions();
            
            // Check for VR capabilities
            checkVRSupport();
        });
        
        // =====================
        // VR SUPPORT CHECK
        // =====================
        function checkVRSupport() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const hasWebVR = navigator.getVRDisplays || navigator.xr;
            
            let supportMessage = "";
            
            if (hasWebVR) {
                supportMessage = "‚úì Full VR support detected";
                enterVRBtn.innerHTML = '<i class="fas fa-vr-cardboard"></i> Enter VR Mode (Headset Ready)';
            } else if (isMobile) {
                supportMessage = "‚úì Mobile VR ready (gyroscopic controls)";
                enterVRBtn.innerHTML = '<i class="fas fa-mobile-alt"></i> Enter VR Mode (Mobile)';
            } else {
                supportMessage = "‚ö† Desktop VR mode (mouse controls only)";
                enterVRBtn.innerHTML = '<i class="fas fa-desktop"></i> Enter VR Mode (Desktop)';
            }
            
            console.log("VR Support:", supportMessage);
        }
        
        // =====================
        // VR MODE FUNCTIONS
        // =====================
        function enterVRMode() {
            console.log("Entering VR Mode...");
            
            // Show loading screen
            vrLoading.style.display = 'flex';
            vrLoadingText.textContent = 'Loading VR environment...';
            
            // Hide 2D interface
            interface2D.style.display = 'none';
            
            // Show VR scene after a short delay
            setTimeout(() => {
                vrLoading.style.display = 'none';
                vrSceneContainer.style.display = 'block';
                exitVRBtn.style.display = 'flex';
                vrStats.style.display = 'block';
                
                isVRModeActive = true;
                
                // Start FPS monitoring
                startFPSMonitoring();
                
                console.log("VR Mode activated");
            }, 1500);
        }
        
        function exitVRMode() {
            console.log("Exiting VR Mode...");
            
            // Hide VR scene
            vrSceneContainer.style.display = 'none';
            exitVRBtn.style.display = 'none';
            vrStats.style.display = 'none';
            
            // Show 2D interface
            interface2D.style.display = 'block';
            
            isVRModeActive = false;
            
            console.log("VR Mode deactivated");
        }
        
        // =====================
        // PROJECT NAVIGATION
        // =====================
        function enterProject(projectName) {
            console.log(`Launching project: ${projectName}`);
            
            // Show loading
            vrLoading.style.display = 'flex';
            vrLoadingText.textContent = `Loading ${projectName}...`;
            
            // Simulate loading time
            setTimeout(() => {
                // Redirect to the actual project
                if (projectName === 'battle-of-quinga') {
                    window.location.href = 'battle-of-quinga/index.html';
                } else if (projectName === 'bulacan-museum') {
                    window.location.href = 'hiyas-ng-bulacan-museum/index.html';
                }
            }, 2000);
        }
        
        // =====================
        // VR SCENE INTERACTIONS
        // =====================
        function setupVRSceneInteractions() {
            // This will be called when A-Frame scene is loaded
            document.querySelector('a-scene').addEventListener('loaded', function() {
                console.log("VR scene loaded");
                
                // Get all VR menu buttons
                const vrButtons = document.querySelectorAll('.vr-menu-button');
                
                vrButtons.forEach(button => {
                    // Add click event
                    button.addEventListener('click', function() {
                        const project = this.getAttribute('data-project');
                        
                        // Visual feedback
                        this.setAttribute('animation', {
                            property: 'scale',
                            to: '1.2 1.2 1.2',
                            dur: 200,
                            easing: 'easeOutElastic'
                        });
                        
                        // Launch project after animation
                        setTimeout(() => {
                            enterProject(project);
                        }, 300);
                    });
                    
                    // Add hover effect
                    button.addEventListener('mouseenter', function() {
                        this.setAttribute('animation', {
                            property: 'scale',
                            to: '1.1 1.1 1.1',
                            dur: 300
                        });
                    });
                    
                    button.addEventListener('mouseleave', function() {
                        this.setAttribute('animation', {
                            property: 'scale',
                            to: '1 1 1',
                            dur: 300
                        });
                    });
                });
                
                // Add gaze controls for VR headsets
                const cursor = document.querySelector('a-cursor');
                if (cursor) {
                    cursor.addEventListener('click', function(evt) {
                        const target = evt.detail.intersectedEl;
                        if (target && target.classList.contains('vr-menu-button')) {
                            const project = target.getAttribute('data-project');
                            enterProject(project);
                        }
                    });
                }
            });
        }
        
        // =====================
        // PERFORMANCE MONITORING
        // =====================
        function startFPSMonitoring() {
            let frameCount = 0;
            let lastTime = performance.now();
            
            function updateFPS() {
                frameCount++;
                const currentTime = performance.now();
                
                if (currentTime >= lastTime + 1000) {
                    const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                    fpsDisplay.textContent = `FPS: ${fps}`;
                    
                    frameCount = 0;
                    lastTime = currentTime;
                }
                
                if (isVRModeActive) {
                    requestAnimationFrame(updateFPS);
                }
            }
            
            updateFPS();
        }
        
        // =====================
        // KEYBOARD SHORTCUTS
        // =====================
        document.addEventListener('keydown', function(e) {
            // Escape to exit VR
            if (e.key === 'Escape' && isVRModeActive) {
                exitVRMode();
            }
            
            // V to toggle VR mode
            if (e.key === 'v' || e.key === 'V') {
                if (!isVRModeActive) {
                    enterVRMode();
                } else {
                    exitVRMode();
                }
            }
            
            // 1 for Battle of Quinga
            if (e.key === '1') {
                enterProject('battle-of-quinga');
            }
            
            // 2 for Bulacan Museum
            if (e.key === '2') {
                enterProject('bulacan-museum');
            }
        });
        
        // =====================
        // MOBILE ORIENTATION
        // =====================
        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', function(event) {
                // Could use this for mobile-specific VR enhancements
            });
        }
        
        // =====================
        // FULLSCREEN SUPPORT
        // =====================
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
        
        // Auto-detect and suggest VR if on mobile
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            setTimeout(() => {
                if (!isVRModeActive) {
                    console.log("Mobile device detected - suggesting VR mode");
                    // Optional: Show a popup suggesting VR mode
                }
            }, 3000);
        }
    </script>
</body>
</html>
