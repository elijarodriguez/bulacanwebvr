<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Tours VR Hub</title>
    <!-- A-Frame for VR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: white;
            min-height: 100vh;
            overflow: hidden;
        }
        
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s;
        }
        
        .loading-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #FF6B6B;
        }
        
        .loading-text {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .loading-subtext {
            color: #aaa;
            margin-top: 20px;
            text-align: center;
            max-width: 80%;
        }
        
        #vr-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* Hidden info panel that can be toggled */
        #info-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            z-index: 100;
            display: none;
            backdrop-filter: blur(5px);
        }
        
        #info-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 107, 107, 0.8);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-icon">
            <i class="fas fa-vr-cardboard fa-spin"></i>
        </div>
        <div class="loading-text">Loading VR Environment...</div>
        <div class="loading-subtext">
            <p>Put on your VR headset for the best experience</p>
            <p style="font-size: 0.9rem; margin-top: 10px;">If using mobile, place device in VR viewer</p>
        </div>
    </div>

    <!-- VR Scene -->
    <div id="vr-scene">
        <a-scene embedded>
            <!-- Sky -->
            <a-sky color="#0a1929"></a-sky>
            
            <!-- Stars -->
            <a-entity geometry="primitive: sphere" radius="100" material="shader: flat; src: #stars"
                scale="-1 1 1"></a-entity>
            
            <!-- Title -->
            <a-text value="VIRTUAL TOURS HUB" 
                   position="0 4 -8" 
                   align="center" 
                   color="#FF6B6B" 
                   width="8"
                   scale="2 2 1"></a-text>
                   
            <a-text value="Choose a Historical Site" 
                   position="0 3 -8" 
                   align="center" 
                   color="#4ECDC4" 
                   width="6"
                   scale="1.5 1.5 1"></a-text>
            
            <!-- Main Menu Position -->
            <a-entity position="0 1.6 0">
                <!-- Battle of Quinga Option -->
                <a-entity class="vr-option" position="-3 0 -4" data-project="battle-of-quinga">
                    <a-box width="1.5" height="0.8" depth="0.1" color="#FF6B6B">
                        <a-animation attribute="rotation"
                            to="0 360 0"
                            dur="20000"
                            repeat="indefinite"
                            easing="linear"></a-animation>
                    </a-box>
                    <a-text value="BATTLE OF QUINGA" 
                           position="0 0.6 0.06" 
                           align="center" 
                           color="white" 
                           width="1.4"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Plaridel, Bulacan" 
                           position="0 0.3 0.06" 
                           align="center" 
                           color="#aaa" 
                           width="1.4"
                           scale="0.5 0.5 1"></a-text>
                </a-entity>
                
                <!-- Museum Option -->
                <a-entity class="vr-option" position="-1 0 -4" data-project="bulacan-museum">
                    <a-box width="1.5" height="0.8" depth="0.1" color="#4ECDC4">
                        <a-animation attribute="rotation"
                            to="0 360 0"
                            dur="20000"
                            repeat="indefinite"
                            easing="linear"></a-animation>
                    </a-box>
                    <a-text value="BULACAN MUSEUM" 
                           position="0 0.6 0.06" 
                           align="center" 
                           color="white" 
                           width="1.4"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Malolos, Bulacan" 
                           position="0 0.3 0.06" 
                           align="center" 
                           color="#aaa" 
                           width="1.4"
                           scale="0.5 0.5 1"></a-text>
                </a-entity>
                
                <!-- Shrine Option -->
                <a-entity class="vr-option" position="1 0 -4" data-project="del-pilar-shrine">
                    <a-box width="1.5" height="0.8" depth="0.1" color="#FFD700">
                        <a-animation attribute="rotation"
                            to="0 360 0"
                            dur="20000"
                            repeat="indefinite"
                            easing="linear"></a-animation>
                    </a-box>
                    <a-text value="DEL PILAR SHRINE" 
                           position="0 0.6 0.06" 
                           align="center" 
                           color="white" 
                           width="1.4"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Bulakan, Bulacan" 
                           position="0 0.3 0.06" 
                           align="center" 
                           color="#aaa" 
                           width="1.4"
                           scale="0.5 0.5 1"></a-text>
                </a-entity>
                
                <!-- Barasoain Option -->
                <a-entity class="vr-option" position="3 0 -4" data-project="barasoain-museum">
                    <a-box width="1.5" height="0.8" depth="0.1" color="#FF8E53">
                        <a-animation attribute="rotation"
                            to="0 360 0"
                            dur="20000"
                            repeat="indefinite"
                            easing="linear"></a-animation>
                    </a-box>
                    <a-text value="BARASOAIN MUSEUM" 
                           position="0 0.6 0.06" 
                           align="center" 
                           color="white" 
                           width="1.4"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Malolos, Bulacan" 
                           position="0 0.3 0.06" 
                           align="center" 
                           color="#aaa" 
                           width="1.4"
                           scale="0.5 0.5 1"></a-text>
                </a-entity>
            </a-entity>
            
            <!-- Floor -->
            <a-circle position="0 -1.5 0" radius="10" color="#1a2b3a" rotation="-90 0 0"></a-circle>
            
            <!-- Instructions -->
            <a-text value="Look at an option and click to select" 
                   position="0 -0.5 -4" 
                   align="center" 
                   color="#4ECDC4" 
                   width="6"></a-text>
            
            <!-- Navigation -->
            <a-entity camera look-controls="pointerLockEnabled: true" position="0 1.6 0">
                <a-cursor 
                    fuse="true"
                    fuse-timeout="1000"
                    material="color: #FF6B6B; shader: flat"
                    raycaster="objects: .vr-option">
                </a-cursor>
            </a-entity>
            
            <!-- Lighting -->
            <a-light type="ambient" color="#445" intensity="0.6"></a-light>
            <a-light type="point" intensity="1" position="5 5 5" color="#4ECDC4"></a-light>
            <a-light type="point" intensity="0.5" position="-5 3 -5" color="#FF6B6B"></a-light>
            <a-light type="point" intensity="0.5" position="0 5 -10" color="#FFFFFF"></a-light>
            
            <!-- Background music (optional) -->
            <a-sound src="https://cdn.aframe.io/basic-guide/audio/backgroundnoise.wav" autoplay="true" loop="true" volume="0.3"></a-sound>
        </a-scene>
    </div>

    <!-- Info Toggle Button -->
    <button id="info-toggle">
        <i class="fas fa-info"></i>
    </button>

    <!-- Info Panel -->
    <div id="info-panel">
        <h3><i class="fas fa-vr-cardboard"></i> VR Instructions</h3>
        <p>1. Put on your VR headset</p>
        <p>2. Look at the floating boxes</p>
        <p>3. Hold gaze for 1 second to select</p>
        <p>4. Move your head to look around</p>
        <p><strong>Keyboard Shortcuts:</strong></p>
        <p>1-4: Quick select tours</p>
        <p>ESC: Exit VR mode</p>
    </div>

    <!-- Stars texture asset -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create stars texture
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            // Create starfield
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 512, 512);
            
            for (let i = 0; i < 2000; i++) {
                const x = Math.random() * 512;
                const y = Math.random() * 512;
                const radius = Math.random() * 1.2;
                const alpha = Math.random() * 0.8 + 0.2;
                
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                ctx.fill();
            }
            
            const starsTexture = canvas.toDataURL();
            
            // Add to A-Frame assets
            const assets = document.querySelector('a-assets');
            if (assets) {
                const img = document.createElement('img');
                img.id = 'stars';
                img.src = starsTexture;
                assets.appendChild(img);
            }
            
            // Projects configuration
            const projects = {
                'battle-of-quinga': {
                    name: 'Battle of Quinga',
                    path: 'battle-of-quinga/index.html',
                    color: '#FF6B6B'
                },
                'bulacan-museum': {
                    name: 'Hiyas ng Bulacan Museum',
                    path: 'hiyas-ng-bulacan-museum/index.html',
                    color: '#4ECDC4'
                },
                'del-pilar-shrine': {
                    name: 'Marcelo H. Del Pilar Shrine',
                    path: 'del-pilar-shrine/index.html',
                    color: '#FFD700'
                },
                'barasoain-museum': {
                    name: 'Barasoain Museum',
                    path: 'barasoain-museum/index.html',
                    color: '#FF8E53'
                }
            };
            
            // Hide loading screen after A-Frame loads
            const scene = document.querySelector('a-scene');
            scene.addEventListener('loaded', function() {
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }, 2000);
            });
            
            // Setup VR interactions
            function setupVRInteractions() {
                const vrOptions = document.querySelectorAll('.vr-option');
                
                vrOptions.forEach(option => {
                    // Hover effects
                    option.addEventListener('mouseenter', function() {
                        this.setAttribute('scale', '1.1 1.1 1.1');
                        this.setAttribute('animation', {
                            property: 'position.y',
                            to: '0.2',
                            dur: 300,
                            easing: 'easeOutQuad'
                        });
                    });
                    
                    option.addEventListener('mouseleave', function() {
                        this.setAttribute('scale', '1 1 1');
                        this.setAttribute('animation', {
                            property: 'position.y',
                            to: '0',
                            dur: 300,
                            easing: 'easeOutQuad'
                        });
                    });
                    
                    // Click events (for cursor)
                    option.addEventListener('click', function() {
                        const project = this.getAttribute('data-project');
                        launchProject(project);
                    });
                });
                
                // Cursor fusion events
                const cursor = document.querySelector('a-cursor');
                if (cursor) {
                    cursor.addEventListener('fusing', function(evt) {
                        const target = evt.detail.intersectedEl;
                        if (target && target.classList.contains('vr-option')) {
                            const project = target.getAttribute('data-project');
                            launchProject(project);
                        }
                    });
                }
            }
            
            // Launch project
            function launchProject(projectId) {
                const project = projects[projectId];
                if (!project) {
                    console.error('Project not found:', projectId);
                    return;
                }
                
                // Show loading
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.display = 'flex';
                loadingScreen.style.opacity = '1';
                loadingScreen.innerHTML = `
                    <div class="loading-icon" style="color: ${project.color}">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="loading-text">Launching ${project.name}</div>
                    <div class="loading-subtext">
                        <p>Entering virtual tour...</p>
                        <p>Make sure VR headset is ready</p>
                    </div>
                `;
                
                // Navigate after delay
                setTimeout(() => {
                    window.location.href = project.path;
                }, 2000);
            }
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Number keys to launch projects
                if (e.key === '1') launchProject('battle-of-quinga');
                if (e.key === '2') launchProject('bulacan-museum');
                if (e.key === '3') launchProject('del-pilar-shrine');
                if (e.key === '4') launchProject('barasoain-museum');
                
                // I key to toggle info panel
                if (e.key === 'i' || e.key === 'I') {
                    const panel = document.getElementById('info-panel');
                    panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
                }
                
                // Fullscreen toggle with F key
                if (e.key === 'f' || e.key === 'F') {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen();
                    } else {
                        document.exitFullscreen();
                    }
                }
            });
            
            // Info panel toggle
            document.getElementById('info-toggle').addEventListener('click', function() {
                const panel = document.getElementById('info-panel');
                panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            });
            
            // Initialize VR interactions after scene loads
            scene.addEventListener('loaded', setupVRInteractions);
            
            // Auto-enter VR mode if available
            if (navigator.xr) {
                scene.addEventListener('loaded', function() {
                    setTimeout(() => {
                        if (scene.hasAttribute('vr-mode-ui')) {
                            scene.setAttribute('vr-mode-ui', 'enabled: true');
                        }
                    }, 1000);
                });
            }
            
            // Mobile VR detection
            if (/Android|iPhone|iPad/i.test(navigator.userAgent)) {
                const loadingSubtext = document.querySelector('.loading-subtext');
                if (loadingSubtext) {
                    loadingSubtext.innerHTML += '<p style="color: #4ECDC4;">Mobile VR detected - place in VR viewer</p>';
                }
            }
        });
    </script>
</body>
</html>