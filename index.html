<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Tours VR Hub</title>
    <!-- A-Frame for VR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Simple 2D loading screen */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
        }
        
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loader {
            font-size: 3rem;
            color: #FF6B6B;
            margin-bottom: 20px;
        }
        
        .loading-text {
            font-size: 1.2rem;
            color: #aaa;
        }
        
        #exit-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 107, 107, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            z-index: 1000;
            text-align: center;
            max-width: 90%;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loader">
            <i class="fas fa-spinner fa-spin"></i>
        </div>
        <div class="loading-text" id="loading-text">Loading Virtual Tours Hub...</div>
    </div>
    
    <!-- Exit Button -->
    <button id="exit-btn" onclick="exitToMenu()">
        <i class="fas fa-home"></i> Back to Menu
    </button>
    
    <!-- Instructions -->
    <div class="instructions">
        <i class="fas fa-mouse-pointer"></i> Look at a project and click to select
    </div>
    
    <!-- A-Frame VR Scene -->
    <a-scene>
        <!-- Assets -->
        <a-assets>
            <img id="space-bg" src="https://cdn.aframe.io/link-traversal/imgs/space.jpg" crossorigin="anonymous">
            <!-- Project images for info panels -->
            <img id="battle-preview" src="https://images.unsplash.com/photo-1546182990-dffeafbe841d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80">
            <img id="museum-preview" src="https://images.unsplash.com/photo-1530122037265-a5f1f91d3b99?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80">
            <img id="shrine-preview" src="https://images.unsplash.com/photo-1542736667-069246bdbc6d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80">
        </a-assets>
        
        <!-- Sky -->
        <a-sky src="#space-bg" rotation="0 -90 0"></a-sky>
        
        <!-- Center platform -->
        <a-cylinder position="0 -1.5 0" radius="6" height="0.1" color="#222" metalness="0.3" roughness="0.7"></a-cylinder>
        
        <!-- Title -->
        <a-text value="Virtual Tours VR Hub" 
               position="0 4 -5" 
               align="center" 
               color="#FF6B6B" 
               width="8"
               font="https://cdn.aframe.io/fonts/Exo2Bold.fnt"></a-text>
        
        <!-- Project 1: Battle of Quinga -->
        <a-entity class="vr-project" id="project-1" position="-3 0.5 -2" data-project="battle-of-quinga">
            <!-- Button base -->
            <a-cylinder radius="0.8" height="0.1" color="#FF6B6B" metalness="0.4" roughness="0.6"></a-cylinder>
            
            <!-- Icon -->
            <a-entity position="0 0.3 0">
                <a-text value="âš”ï¸" 
                       align="center" 
                       width="2" 
                       position="0 0 0.1"
                       scale="2 2 2"></a-text>
            </a-entity>
            
            <!-- Label -->
            <a-text value="Battle of Quinga" 
                   position="0 -0.8 0" 
                   align="center" 
                   color="white" 
                   width="3"></a-text>
            
            <!-- Info panel -->
            <a-plane position="1.5 1 0" 
                    width="1.8" 
                    height="1.2" 
                    color="#111" 
                    opacity="0.9" 
                    visible="false"
                    class="info-panel">
                <a-text value="3 Panoramic Views" 
                       position="0 0.3 0.01" 
                       align="center" 
                       color="#FF6B6B" 
                       width="1.5"></a-text>
                <a-text value="Historical Battlefield" 
                       position="0 -0.2 0.01" 
                       align="center" 
                       color="white" 
                       width="1.5"
                       font="size: 0.3;"></a-text>
            </a-plane>
            
            <!-- Hover animation -->
            <a-animation attribute="position"
                        from="-3 0.5 -2"
                        to="-3 0.7 -2"
                        dur="2000"
                        direction="alternate"
                        repeat="indefinite"></a-animation>
        </a-entity>
        
        <!-- Project 2: Bulacan Museum -->
        <a-entity class="vr-project" id="project-2" position="0 0.5 -4" data-project="bulacan-museum">
            <!-- Button base -->
            <a-cylinder radius="0.8" height="0.1" color="#4ECDC4" metalness="0.4" roughness="0.6"></a-cylinder>
            
            <!-- Icon -->
            <a-entity position="0 0.3 0">
                <a-text value="ðŸ›ï¸" 
                       align="center" 
                       width="2" 
                       position="0 0 0.1"
                       scale="2 2 2"></a-text>
            </a-entity>
            
            <!-- Label -->
            <a-text value="Bulacan Museum" 
                   position="0 -0.8 0" 
                   align="center" 
                   color="white" 
                   width="3"></a-text>
            
            <!-- Info panel -->
            <a-plane position="0 1.5 0" 
                    width="1.8" 
                    height="1.2" 
                    color="#111" 
                    opacity="0.9" 
                    visible="false"
                    class="info-panel">
                <a-text value="7 Exhibition Rooms" 
                       position="0 0.3 0.01" 
                       align="center" 
                       color="#4ECDC4" 
                       width="1.5"></a-text>
                <a-text value="Cultural Artifacts" 
                       position="0 -0.2 0.01" 
                       align="center" 
                       color="white" 
                       width="1.5"
                       font="size: 0.3;"></a-text>
            </a-plane>
            
            <!-- Hover animation -->
            <a-animation attribute="position"
                        from="0 0.5 -4"
                        to="0 0.7 -4"
                        dur="2000"
                        direction="alternate"
                        repeat="indefinite"></a-animation>
        </a-entity>
        
        <!-- Project 3: Del Pilar Shrine -->
        <a-entity class="vr-project" id="project-3" position="3 0.5 -2" data-project="del-pilar-shrine">
            <!-- Button base -->
            <a-cylinder radius="0.8" height="0.1" color="#FFD700" metalness="0.4" roughness="0.6"></a-cylinder>
            
            <!-- Icon -->
            <a-entity position="0 0.3 0">
                <a-text value="ðŸ›ï¸" 
                       align="center" 
                       width="2" 
                       position="0 0 0.1"
                       scale="2 2 2"></a-text>
            </a-entity>
            
            <!-- Label -->
            <a-text value="Del Pilar Shrine" 
                   position="0 -0.8 0" 
                   align="center" 
                   color="white" 
                   width="3"></a-text>
            
            <!-- Info panel -->
            <a-plane position="-1.5 1 0" 
                    width="1.8" 
                    height="1.2" 
                    color="#111" 
                    opacity="0.9" 
                    visible="false"
                    class="info-panel">
                <a-text value="4 Panoramic Views" 
                       position="0 0.3 0.01" 
                       align="center" 
                       color="#FFD700" 
                       width="1.5"></a-text>
                <a-text value="Historical Monument" 
                       position="0 -0.2 0.01" 
                       align="center" 
                       color="white" 
                       width="1.5"
                       font="size: 0.3;"></a-text>
            </a-plane>
            
            <!-- Hover animation -->
            <a-animation attribute="position"
                        from="3 0.5 -2"
                        to="3 0.7 -2"
                        dur="2000"
                        direction="alternate"
                        repeat="indefinite"></a-animation>
        </a-entity>
        
        <!-- Central decorative element -->
        <a-ring position="0 0.1 0" radius-inner="1" radius-outer="1.2" color="#FF6B6B" rotation="-90 0 0">
            <a-animation attribute="rotation"
                        to="-90 360 0"
                        dur="20000"
                        repeat="indefinite"></a-animation>
        </a-ring>
        
        <!-- Camera -->
        <a-entity camera look-controls="pointerLockEnabled: true" position="0 1.6 0">
            <a-cursor></a-cursor>
        </a-entity>
        
        <!-- Lights -->
        <a-light type="ambient" color="#445" intensity="0.6"></a-light>
        <a-light type="point" intensity="0.8" position="5 5 5" color="#FF6B6B"></a-light>
        <a-light type="point" intensity="0.6" position="-5 3 -5" color="#4ECDC4"></a-light>
        <a-light type="point" intensity="0.6" position="0 3 5" color="#FFD700"></a-light>
    </a-scene>

    <script>
        // Project configuration
        const projects = {
            'battle-of-quinga': {
                name: 'Battle of Quinga',
                path: 'battle-of-quinga/index.html',
                color: '#FF6B6B'
            },
            'bulacan-museum': {
                name: 'Hiyas ng Bulacan Museum',
                path: 'bulacan-museum/index.html',
                color: '#4ECDC4'
            },
            'del-pilar-shrine': {
                name: 'Marcelo H. Del Pilar Shrine',
                path: 'del-pilar-shrine/index.html',
                color: '#FFD700'
            }
        };
        
        // DOM elements
        const loadingScreen = document.getElementById('loading-screen');
        const loadingText = document.getElementById('loading-text');
        const exitBtn = document.getElementById('exit-btn');
        
        // Initialize when A-Frame scene loads
        document.querySelector('a-scene').addEventListener('loaded', function() {
            console.log('VR scene loaded');
            
            // Hide loading screen
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1000);
            
            // Setup VR interactions
            setupVRInteractions();
            
            // Add keyboard shortcuts
            setupKeyboardControls();
        });
        
        // Setup VR scene interactions
        function setupVRInteractions() {
            // Get all project buttons
            const projectButtons = document.querySelectorAll('.vr-project');
            
            projectButtons.forEach(button => {
                // Click event
                button.addEventListener('click', function() {
                    const projectId = this.getAttribute('data-project');
                    launchProject(projectId);
                });
                
                // Hover in - show info panel
                button.addEventListener('mouseenter', function() {
                    // Scale up
                    this.setAttribute('animation', {
                        property: 'scale',
                        to: '1.2 1.2 1.2',
                        dur: 300
                    });
                    
                    // Show info panel
                    const infoPanel = this.querySelector('.info-panel');
                    if (infoPanel) {
                        infoPanel.setAttribute('visible', 'true');
                    }
                });
                
                // Hover out - hide info panel
                button.addEventListener('mouseleave', function() {
                    // Scale back
                    this.setAttribute('animation', {
                        property: 'scale',
                        to: '1 1 1',
                        dur: 300
                    });
                    
                    // Hide info panel
                    const infoPanel = this.querySelector('.info-panel');
                    if (infoPanel) {
                        infoPanel.setAttribute('visible', 'false');
                    }
                });
            });
            
            // Cursor interaction for VR
            const cursor = document.querySelector('a-cursor');
            if (cursor) {
                cursor.addEventListener('click', function(evt) {
                    const target = evt.detail.intersectedEl;
                    if (target && target.classList.contains('vr-project')) {
                        const projectId = target.getAttribute('data-project');
                        launchProject(projectId);
                    }
                });
                
                // Visual feedback on hover
                cursor.addEventListener('mouseenter', function(evt) {
                    const target = evt.detail.intersectedEl;
                    if (target && target.classList.contains('vr-project')) {
                        cursor.setAttribute('color', projects[target.getAttribute('data-project')].color || '#FF6B6B');
                    }
                });
                
                cursor.addEventListener('mouseleave', function() {
                    cursor.setAttribute('color', '#FFF');
                });
            }
        }
        
        // Launch a project
        function launchProject(projectId) {
            const project = projects[projectId];
            if (!project) {
                console.error('Project not found:', projectId);
                return;
            }
            
            console.log('Launching project:', project.name);
            
            // Visual feedback
            const button = document.querySelector(`[data-project="${projectId}"]`);
            if (button) {
                button.setAttribute('animation', {
                    property: 'scale',
                    to: '1.5 1.5 1.5',
                    dur: 200,
                    easing: 'easeOutElastic'
                });
            }
            
            // Show loading
            loadingScreen.style.display = 'flex';
            loadingScreen.style.opacity = '1';
            loadingText.textContent = `Loading ${project.name}...`;
            
            // Navigate after delay
            setTimeout(() => {
                window.location.href = project.path;
            }, 1500);
        }
        
        // Exit to menu (for when this is launched from somewhere else)
        function exitToMenu() {
            window.location.href = '../index.html';
        }
        
        // Keyboard controls
        function setupKeyboardControls() {
            document.addEventListener('keydown', function(e) {
                // Number keys to select projects
                if (e.key === '1') launchProject('battle-of-quinga');
                if (e.key === '2') launchProject('bulacan-museum');
                if (e.key === '3') launchProject('del-pilar-shrine');
                
                // Escape to exit
                if (e.key === 'Escape') {
                    exitToMenu();
                }
                
                // WASD to look around (helpful for desktop users)
                if (e.key === 'w' || e.key === 'W') {
                    const camera = document.querySelector('[camera]');
                    const rotation = camera.getAttribute('rotation');
                    camera.setAttribute('rotation', {
                        x: rotation.x - 10,
                        y: rotation.y,
                        z: rotation.z
                    });
                }
                if (e.key === 's' || e.key === 'S') {
                    const camera = document.querySelector('[camera]');
                    const rotation = camera.getAttribute('rotation');
                    camera.setAttribute('rotation', {
                        x: rotation.x + 10,
                        y: rotation.y,
                        z: rotation.z
                    });
                }
                if (e.key === 'a' || e.key === 'A') {
                    const camera = document.querySelector('[camera]');
                    const rotation = camera.getAttribute('rotation');
                    camera.setAttribute('rotation', {
                        x: rotation.x,
                        y: rotation.y - 10,
                        z: rotation.z
                    });
                }
                if (e.key === 'd' || e.key === 'D') {
                    const camera = document.querySelector('[camera]');
                    const rotation = camera.getAttribute('rotation');
                    camera.setAttribute('rotation', {
                        x: rotation.x,
                        y: rotation.y + 10,
                        z: rotation.z
                    });
                }
            });
        }
        
        // Auto-hide instructions after 10 seconds
        setTimeout(() => {
            const instructions = document.querySelector('.instructions');
            if (instructions) {
                instructions.style.opacity = '0.5';
            }
        }, 10000);
        
        // Mobile detection for different instructions
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.querySelector('.instructions').innerHTML = 
                '<i class="fas fa-mobile-alt"></i> Tap on a project to select or move device to look around';
        }
    </script>
</body>
</html>
