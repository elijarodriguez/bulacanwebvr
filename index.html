<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Tours VR Hub</title>
    <!-- A-Frame for VR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
        }
        
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
            font-family: Arial, sans-serif;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #333;
            border-top: 5px solid #FF6B6B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #vr-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            text-align: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <h2>Loading VR Environment</h2>
        <p>Please wait while we prepare your VR experience...</p>
    </div>

    <!-- Instructions -->
    <div id="instructions" style="display: none;">
        <p>Look at a location and click or gaze to select</p>
        <p>Press 1-5 for quick selection</p>
    </div>

    <!-- VR Scene -->
    <div id="vr-scene">
        <a-scene embedded vr-mode-ui="enabled: true">
            <!-- Background -->
            <a-sky color="#0a1929"></a-sky>
            
            <!-- Menu Title -->
            <a-text value="VIRTUAL TOURS" 
                   position="0 3.5 -4" 
                   align="center" 
                   color="#FF6B6B" 
                   width="6"
                   scale="2 2 1"></a-text>
            <a-text value="Bulacan Historical Sites" 
                   position="0 2.8 -4" 
                   align="center" 
                   color="#FFFFFF" 
                   width="5"
                   scale="1.2 1.2 1"
                   opacity="0.8"></a-text>
            
            <!-- Menu Options - Arranged in a curved arc for better visibility -->
            <a-entity id="menu-options" position="0 1.6 0">
                <!-- Battle of Quinga (Left) -->
                <a-entity class="menu-option" 
                         position="-2.5 0.5 -2" 
                         data-project="battle-of-quinga"
                         data-color="#FF6B6B">
                    <a-box width="1" height="1" depth="0.1" color="#FF6B6B">
                        <a-animation attribute="rotation" 
                                   to="0 360 0" 
                                   dur="10000" 
                                   repeat="indefinite"></a-animation>
                    </a-box>
                    <a-text value="Battle" 
                           position="0 0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="of Quinga" 
                           position="0 -0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="1" 
                           position="0 -0.6 0.1" 
                           align="center" 
                           color="white" 
                           width="1"></a-text>
                </a-entity>
                
                <!-- Bulacan Museum (Left-Center) -->
                <a-entity class="menu-option" 
                         position="-1.3 0.5 -2" 
                         data-project="bulacan-museum"
                         data-color="#4ECDC4">
                    <a-box width="1" height="1" depth="0.1" color="#4ECDC4">
                        <a-animation attribute="rotation" 
                                   to="0 360 0" 
                                   dur="10000" 
                                   repeat="indefinite"></a-animation>
                    </a-box>
                    <a-text value="Hiyas ng" 
                           position="0 0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Bulacan" 
                           position="0 -0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="2" 
                           position="0 -0.6 0.1" 
                           align="center" 
                           color="white" 
                           width="1"></a-text>
                </a-entity>
                
                <!-- Del Pilar Shrine (Center) -->
                <a-entity class="menu-option" 
                         position="0 0.5 -2" 
                         data-project="del-pilar-shrine"
                         data-color="#FFD700">
                    <a-box width="1" height="1" depth="0.1" color="#FFD700">
                        <a-animation attribute="rotation" 
                                   to="0 360 0" 
                                   dur="10000" 
                                   repeat="indefinite"></a-animation>
                    </a-box>
                    <a-text value="Del Pilar" 
                           position="0 0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Shrine" 
                           position="0 -0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="3" 
                           position="0 -0.6 0.1" 
                           align="center" 
                           color="white" 
                           width="1"></a-text>
                </a-entity>
                
                <!-- Barasoain Museum (Right-Center) -->
                <a-entity class="menu-option" 
                         position="1.3 0.5 -2" 
                         data-project="barasoain-museum"
                         data-color="#FF8E53">
                    <a-box width="1" height="1" depth="0.1" color="#FF8E53">
                        <a-animation attribute="rotation" 
                                   to="0 360 0" 
                                   dur="10000" 
                                   repeat="indefinite"></a-animation>
                    </a-box>
                    <a-text value="Barasoain" 
                           position="0 0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Museum" 
                           position="0 -0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="4" 
                           position="0 -0.6 0.1" 
                           align="center" 
                           color="white" 
                           width="1"></a-text>
                </a-entity>
                
                <!-- CASA REAL SHRINE (Right) - NEW -->
                <a-entity class="menu-option" 
                         position="2.5 0.5 -2" 
                         data-project="casa-real-shrine"
                         data-color="#9B59B6">
                    <a-box width="1" height="1" depth="0.1" color="#9B59B6">
                        <a-animation attribute="rotation" 
                                   to="0 360 0" 
                                   dur="10000" 
                                   repeat="indefinite"></a-animation>
                    </a-box>
                    <a-text value="Casa Real" 
                           position="0 0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="Shrine" 
                           position="0 -0.2 0.1" 
                           align="center" 
                           color="white" 
                           width="2"
                           scale="0.8 0.8 1"></a-text>
                    <a-text value="5" 
                           position="0 -0.6 0.1" 
                           align="center" 
                           color="white" 
                           width="1"></a-text>
                </a-entity>
            </a-entity>
            
            <!-- Floor Grid for reference -->
            <a-grid position="0 0 -4" width="10" height="10" color="#FFFFFF" opacity="0.2"></a-grid>
            
            <!-- Camera and Cursor -->
            <a-entity camera look-controls position="0 1.6 0">
                <a-cursor 
                    fuse="true"
                    fuse-timeout="2000"
                    material="color: #FF6B6B"
                    position="0 0 -1">
                </a-cursor>
            </a-entity>
            
            <!-- Lighting -->
            <a-light type="ambient" color="#fff" intensity="0.6"></a-light>
            <a-light type="point" intensity="1" position="5 5 5" color="#fff"></a-light>
            <a-light type="point" intensity="0.5" position="-5 5 5" color="#4ECDC4"></a-light>
            <a-light type="point" intensity="0.5" position="5 5 -5" color="#9B59B6"></a-light>
        </a-scene>
    </div>

    <script>
        // Project configuration - ADDED CASA REAL SHRINE
        const projects = {
            'battle-of-quinga': {
                name: 'Battle of Quinga',
                path: 'battle-of-quinga/index.html',
                color: '#FF6B6B'
            },
            'bulacan-museum': {
                name: 'Hiyas ng Bulacan Museum',
                path: 'hiyas-ng-bulacan-museum/index.html',
                color: '#4ECDC4'
            },
            'del-pilar-shrine': {
                name: 'Marcelo H. Del Pilar Shrine',
                path: 'del-pilar-shrine/index.html',
                color: '#FFD700'
            },
            'barasoain-museum': {
                name: 'Barasoain Museum',
                path: 'barasoain-museum/index.html',
                color: '#FF8E53'
            },
            // NEW: Casa Real Shrine
            'casa-real-shrine': {
                name: 'Casa Real Shrine',
                path: 'casa-real-shrine/index.html',
                color: '#9B59B6' // Purple color
            }
        };
        
        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loading-screen');
            const instructions = document.getElementById('instructions');
            
            // Hide loading screen when A-Frame is ready
            const scene = document.querySelector('a-scene');
            scene.addEventListener('loaded', function() {
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        instructions.style.display = 'block';
                    }, 500);
                }, 1000);
            });
            
            // Setup click events for menu options
            setupMenuInteractions();
            
            // Setup keyboard shortcuts
            setupKeyboardShortcuts();
        });
        
        function setupMenuInteractions() {
            const menuOptions = document.querySelectorAll('.menu-option');
            
            menuOptions.forEach(option => {
                // Click event
                option.addEventListener('click', function() {
                    const projectId = this.getAttribute('data-project');
                    launchProject(projectId);
                });
                
                // Mouse enter/leave for visual feedback
                option.addEventListener('mouseenter', function() {
                    const color = this.getAttribute('data-color');
                    const box = this.querySelector('a-box');
                    if (box) {
                        box.setAttribute('color', '#FFFFFF');
                        box.setAttribute('scale', '1.2 1.2 1.2');
                    }
                });
                
                option.addEventListener('mouseleave', function() {
                    const color = this.getAttribute('data-color');
                    const box = this.querySelector('a-box');
                    if (box) {
                        box.setAttribute('color', color);
                        box.setAttribute('scale', '1 1 1');
                    }
                });
            });
            
            // Setup cursor fusion events
            const cursor = document.querySelector('a-cursor');
            if (cursor) {
                cursor.addEventListener('fusing', function(evt) {
                    const intersectedEl = evt.detail.intersectedEl;
                    if (intersectedEl && intersectedEl.classList.contains('menu-option')) {
                        const projectId = intersectedEl.getAttribute('data-project');
                        launchProject(projectId);
                    }
                });
            }
        }
        
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Number keys 1-5
                if (e.key === '1') launchProject('battle-of-quinga');
                if (e.key === '2') launchProject('bulacan-museum');
                if (e.key === '3') launchProject('del-pilar-shrine');
                if (e.key === '4') launchProject('barasoain-museum');
                if (e.key === '5') launchProject('casa-real-shrine'); // NEW
                
                // Spacebar for testing
                if (e.key === ' ') {
                    alert('Available tours: 1-5 keys or click on colored boxes');
                }
                
                // F for fullscreen
                if (e.key === 'f' || e.key === 'F') {
                    toggleFullscreen();
                }
            });
        }
        
        function launchProject(projectId) {
            const project = projects[projectId];
            if (!project) {
                console.error('Project not found:', projectId);
                return;
            }
            
            // Show loading
            const loadingScreen = document.getElementById('loading-screen');
            loadingScreen.style.display = 'flex';
            loadingScreen.style.opacity = '1';
            loadingScreen.innerHTML = `
                <div class="spinner" style="border-top-color: ${project.color}"></div>
                <h2>Loading ${project.name}</h2>
                <p>Entering virtual tour...</p>
            `;
            
            // Navigate after short delay
            setTimeout(() => {
                window.location.href = project.path;
            }, 1500);
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen error:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }
        
        // Add click sound for feedback
        function playClickSound() {
            const audio = new Audio();
            audio.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==';
            audio.volume = 0.3;
            audio.play().catch(() => {});
        }
    </script>
</body>
</html>